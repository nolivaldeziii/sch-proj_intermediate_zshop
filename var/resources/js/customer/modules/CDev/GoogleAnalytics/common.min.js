var _ga={};_ga.gaRegisterSearchEvent=function(substring){_ga.gaRegisterEvent('search','do_search',substring)};_ga.gaRegisterEvent=function(category,action,label,value){if('undefined'!=typeof(window._gaq)){_gaq.push(['_trackEvent',category,action,label,value])}else if('undefined'!=typeof(window.ga))ga('send','event',category,action,label,value)};_ga.searchTextPattern=".search-product-form input[name='substring']";jQuery().ready(function(){core.bind('updateCart',function(event,data){if(data.items)for(var i=0;i<data.items.length;i++){var item=data.items[i];if(item.quantity_change>0&&item.quantity_change==item.quantity){_ga.gaRegisterEvent('cart','add',item.key,item.quantity_change)}else if(item.quantity_change<0&&(item.quantity==0||(item.quantity+item.quantity_change)<=0)){_ga.gaRegisterEvent('cart','remove',item.key,item.quantity_change)}else _ga.gaRegisterEvent('cart','change',item.key,item.quantity_change)};if(data.shippingMethodId)_ga.gaRegisterEvent('cart','changeShippingMethod',data.shippingMethodId);if(data.paymentMethodId)_ga.gaRegisterEvent('cart','changePaymentMethod',data.paymentMethodId)})})